[package]
name = "mochi-terminal"
version = "0.1.0"
edition = "2021"
authors = ["Mochi Terminal Contributors"]
description = "A real Linux terminal emulator built from scratch"
license = "MIT"
repository = "https://github.com/andrewgcodes/mochi"
keywords = ["terminal", "emulator", "vt100", "xterm", "pty"]
categories = ["command-line-interface"]

[lib]
name = "mochi_terminal"
path = "src/lib.rs"

[[bin]]
name = "mochi-term"
path = "src/bin/mochi_term.rs"

[[bin]]
name = "mochi-headless"
path = "src/bin/mochi_headless.rs"

[[bin]]
name = "mochi-pty-test"
path = "src/bin/mochi_pty_test.rs"

[dependencies]
# PTY operations (low-level POSIX bindings, NOT terminal emulation)
nix = { version = "0.27", features = ["term", "process", "poll", "fs", "signal"] }

# Unicode character width tables (data only, we implement terminal rules)
unicode-width = "0.1"

# Serialization for snapshots and config
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"

# Logging
tracing = "0.1"
tracing-subscriber = { version = "0.3", features = ["env-filter"] }

# Error handling
thiserror = "1.0"

# Clipboard integration will be added in a later PR when implementing the GUI
# arboard requires image crate which has Rust 1.85+ requirements in latest versions

# Window creation and event handling (GUI only)
# Note: GUI dependencies will be added in a later PR when implementing the renderer
# winit = { version = "0.29", optional = true }
# wgpu = { version = "0.19", optional = true }
# fontdue = { version = "0.8", optional = true }
# pollster = { version = "0.3", optional = true }

[dev-dependencies]
# Property-based testing
proptest = "1.4"

# Criterion for benchmarks (without html_reports to avoid image crate issues)
criterion = { version = "0.5", default-features = false }

# Temp files for tests
tempfile = "3.8"

[features]
default = []
# GUI feature will be enabled in a later PR when implementing the renderer
# gui = ["winit", "wgpu", "fontdue", "pollster"]

[[bench]]
name = "parser"
harness = false

[[bench]]
name = "screen"
harness = false

[profile.release]
lto = true
codegen-units = 1

[profile.bench]
lto = true
